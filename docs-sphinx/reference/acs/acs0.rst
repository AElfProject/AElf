ACS0 - Contract Deployment Standard
===================================

ACS0 is used to manage the deployment and update of contracts.

Interface
---------

The contract inherited from ACS0 need implement the following interfaces:

Methods
~~~~~~~

+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| Method Name                              | Request Type                                                                             | Response Type                                                                        | Description                                                                                                                              |
+==========================================+==========================================================================================+======================================================================================+==========================================================================================================================================+
| DeploySystemSmartContract                | `acs0.SystemContractDeploymentInput <#acs0.SystemContractDeploymentInput>`__             | `aelf.Address <#aelf.Address>`__                                                     | Deploy a system smart contract on chain and return the address of the system contract deployed.                                          |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| DeploySmartContract                      | `acs0.ContractDeploymentInput <#acs0.ContractDeploymentInput>`__                         | `aelf.Address <#aelf.Address>`__                                                     | Deploy a smart contract on chain and return the address of the contract deployed.                                                        |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| UpdateSmartContract                      | `acs0.ContractUpdateInput <#acs0.ContractUpdateInput>`__                                 | `aelf.Address <#aelf.Address>`__                                                     | Update a smart contract on chain.                                                                                                        |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| ProposeNewContract                       | `acs0.ContractDeploymentInput <#acs0.ContractDeploymentInput>`__                         | `aelf.Hash <#aelf.Hash>`__                                                           | Create a proposal to deploy a new contract and returns the id of the proposed contract.                                                  |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| ProposeContractCodeCheck                 | `acs0.ContractCodeCheckInput <#acs0.ContractCodeCheckInput>`__                           | `aelf.Hash <#aelf.Hash>`__                                                           | Create a proposal to check the code of a contract and return the id of the proposed contract.                                            |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| ProposeUpdateContract                    | `acs0.ContractUpdateInput <#acs0.ContractUpdateInput>`__                                 | `aelf.Hash <#aelf.Hash>`__                                                           | Create a proposal to update the specified contract and return the id of the proposed contract.                                           |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| ReleaseApprovedContract                  | `acs0.ReleaseContractInput <#acs0.ReleaseContractInput>`__                               | `google.protobuf.Empty <#google.protobuf.Empty>`__                                   | Release the contract proposal which has been approved.                                                                                   |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| ReleaseCodeCheckedContract               | `acs0.ReleaseContractInput <#acs0.ReleaseContractInput>`__                               | `google.protobuf.Empty <#google.protobuf.Empty>`__                                   | Release the proposal which has passed the code check.                                                                                    |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| ValidateSystemContractAddress            | `acs0.ValidateSystemContractAddressInput <#acs0.ValidateSystemContractAddressInput>`__   | `google.protobuf.Empty <#google.protobuf.Empty>`__                                   | Validate whether the input system contract exists.                                                                                       |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| SetContractProposerRequiredState         | `google.protobuf.BoolValue <#google.protobuf.BoolValue>`__                               | `google.protobuf.Empty <#google.protobuf.Empty>`__                                   | Set authority of contract deployment.                                                                                                    |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| CurrentContractSerialNumber              | `google.protobuf.Empty <#google.protobuf.Empty>`__                                       | `google.protobuf.Int64Value <#google.protobuf.Int64Value>`__                         | Get the current serial number of genesis contract (corresponds to the serial number that will be given to the next deployed contract).   |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| GetContractInfo                          | `aelf.Address <#aelf.Address>`__                                                         | `acs0.ContractInfo <#acs0.ContractInfo>`__                                           | Get detailed information about the specified contract.                                                                                   |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| GetContractAuthor                        | `aelf.Address <#aelf.Address>`__                                                         | `aelf.Address <#aelf.Address>`__                                                     | Get author of the specified contract.                                                                                                    |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| GetContractHash                          | `aelf.Address <#aelf.Address>`__                                                         | `aelf.Hash <#aelf.Hash>`__                                                           | Get the code hash of the contract about the specified address.                                                                           |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| GetContractAddressByName                 | `aelf.Hash <#aelf.Hash>`__                                                               | `aelf.Address <#aelf.Address>`__                                                     | Get the address of a system contract by its name.                                                                                        |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| GetSmartContractRegistrationByAddress    | `aelf.Address <#aelf.Address>`__                                                         | `aelf.SmartContractRegistration <#aelf.SmartContractRegistration>`__                 | Get the registration of a smart contract by its address.                                                                                 |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| GetSmartContractRegistrationByCodeHash   | `aelf.Hash <#aelf.Hash>`__                                                               | `aelf.SmartContractRegistration <#aelf.SmartContractRegistration>`__                 | Get the registration of a smart contract by code hash.                                                                                   |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| DeployUserSmartContract                  | `acs0.ContractDeploymentInput <#acs0.ContractDeploymentInput>`__                         | `acs0.DeployUserSmartContractOutput <#acs0.DeployUserSmartContractOutput>`__         | Deploy a user smart contract on chain and return the hash of the contract code.                                                          |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| UpdateUserSmartContract                  | `acs0.ContractUpdateInput <#acs0.ContractUpdateInput>`__                                 | `google.protobuf.Empty <#google.protobuf.Empty>`__                                   | Update a user smart contract on chain.                                                                                                   |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| ReleaseApprovedUserSmartContract         | `acs0.ReleaseContractInput <#acs0.ReleaseContractInput>`__                               | `google.protobuf.Empty <#google.protobuf.Empty>`__                                   | Release the proposal which has passed the code check.                                                                                    |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| PerformDeployUserSmartContract           | `acs0.ContractDeploymentInput <#acs0.ContractDeploymentInput>`__                         | `aelf.Address <#aelf.Address>`__                                                     | Perform user contract deployment.                                                                                                        |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| PerformUpdateUserSmartContract           | `acs0.ContractUpdateInput <#acs0.ContractUpdateInput>`__                                 | `google.protobuf.Empty <#google.protobuf.Empty>`__                                   | Perform user contract update.                                                                                                            |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+
| SetContractAuthor                        | `acs0.SetContractAuthorInput <#acs0.SetContractAuthorInput>`__                           | `google.protobuf.Empty <#google.protobuf.Empty>`__                                   | Set author of the specified contract.                                                                                                    |
+------------------------------------------+------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------+


Types
~~~~~

.. raw:: html

   <div id="acs0.CodeCheckRequired">

.. raw:: html

   </div>

acs0.CodeCheckRequired
^^^^^^^^^^^^^^^^^^^^^^

+-----------------------------------+------------------------------+-----------------------------------------------------+---------+
| Field                             | Type                         | Description                                         | Label   |
+===================================+==============================+=====================================================+=========+
| code                              | `bytes <#bytes>`__           | The byte array of the contract code.                |         |
+-----------------------------------+------------------------------+-----------------------------------------------------+---------+
| proposed\_contract\_input\_hash   | `aelf.Hash <#aelf.Hash>`__   | The id of the proposed contract.                    |         |
+-----------------------------------+------------------------------+-----------------------------------------------------+---------+
| category                          | `sint32 <#sint32>`__         | The category of contract code(0: C#).               |         |
+-----------------------------------+------------------------------+-----------------------------------------------------+---------+
| is\_system\_contract              | `bool <#bool>`__             | Indicates if the contract is the system contract.   |         |
+-----------------------------------+------------------------------+-----------------------------------------------------+---------+

.. raw:: html

   <div id="acs0.CodeUpdated">

.. raw:: html

   </div>

acs0.CodeUpdated
^^^^^^^^^^^^^^^^

+-------------------+------------------------------------+--------------------------------------------+---------+
| Field             | Type                               | Description                                | Label   |
+===================+====================================+============================================+=========+
| address           | `aelf.Address <#aelf.Address>`__   | The address of the updated contract.       |         |
+-------------------+------------------------------------+--------------------------------------------+---------+
| old\_code\_hash   | `aelf.Hash <#aelf.Hash>`__         | The byte array of the old contract code.   |         |
+-------------------+------------------------------------+--------------------------------------------+---------+
| new\_code\_hash   | `aelf.Hash <#aelf.Hash>`__         | The byte array of the new contract code.   |         |
+-------------------+------------------------------------+--------------------------------------------+---------+
| version           | `int32 <#int32>`__                 | The version of the current contract.       |         |
+-------------------+------------------------------------+--------------------------------------------+---------+

.. raw:: html

   <div id="acs0.ContractCodeCheckInput">

.. raw:: html

   </div>

acs0.ContractCodeCheckInput
^^^^^^^^^^^^^^^^^^^^^^^^^^^

+-----------------------------------+------------------------------+-----------------------------------------------------------------------------------------+---------+
| Field                             | Type                         | Description                                                                             | Label   |
+===================================+==============================+=========================================================================================+=========+
| contract\_input                   | `bytes <#bytes>`__           | The byte array of the contract code to be checked.                                      |         |
+-----------------------------------+------------------------------+-----------------------------------------------------------------------------------------+---------+
| is\_contract\_deployment          | `bool <#bool>`__             | Whether the input contract is to be deployed or updated.                                |         |
+-----------------------------------+------------------------------+-----------------------------------------------------------------------------------------+---------+
| code\_check\_release\_method      | `string <#string>`__         | Method to call after code check complete(DeploySmartContract or UpdateSmartContract).   |         |
+-----------------------------------+------------------------------+-----------------------------------------------------------------------------------------+---------+
| proposed\_contract\_input\_hash   | `aelf.Hash <#aelf.Hash>`__   | The id of the proposed contract.                                                        |         |
+-----------------------------------+------------------------------+-----------------------------------------------------------------------------------------+---------+
| category                          | `sint32 <#sint32>`__         | The category of contract code(0: C#).                                                   |         |
+-----------------------------------+------------------------------+-----------------------------------------------------------------------------------------+---------+
| is\_system\_contract              | `bool <#bool>`__             | Indicates if the contract is the system contract.                                       |         |
+-----------------------------------+------------------------------+-----------------------------------------------------------------------------------------+---------+

.. raw:: html

   <div id="acs0.ContractDeployed">

.. raw:: html

   </div>

acs0.ContractDeployed
^^^^^^^^^^^^^^^^^^^^^

+--------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| Field        | Type                               | Description                                                                 | Label   |
+==============+====================================+=============================================================================+=========+
| author       | `aelf.Address <#aelf.Address>`__   | The author of the contract, this is the person who deployed the contract.   |         |
+--------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| code\_hash   | `aelf.Hash <#aelf.Hash>`__         | The hash of the contract code.                                              |         |
+--------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| address      | `aelf.Address <#aelf.Address>`__   | The address of the contract.                                                |         |
+--------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| version      | `int32 <#int32>`__                 | The version of the current contract.                                        |         |
+--------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| Name         | `aelf.Hash <#aelf.Hash>`__         | The name of the contract. It has to be unique.                              |         |
+--------------+------------------------------------+-----------------------------------------------------------------------------+---------+

.. raw:: html

   <div id="acs0.ContractDeploymentInput">

.. raw:: html

   </div>

acs0.ContractDeploymentInput
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------+------------------------+-----------------------------------------+---------+
| Field      | Type                   | Description                             | Label   |
+============+========================+=========================================+=========+
| category   | `sint32 <#sint32>`__   | The category of contract code(0: C#).   |         |
+------------+------------------------+-----------------------------------------+---------+
| code       | `bytes <#bytes>`__     | The byte array of the contract code.    |         |
+------------+------------------------+-----------------------------------------+---------+

.. raw:: html

   <div id="acs0.DeployUserSmartContractOutput">

.. raw:: html

   </div>

acs0.DeployUserSmartContractOutput
'''''''''''''''''''''''''''''''''''

+------------------------+------------------------------------+---------------------------------------------+---------+
| Field                  | Type                               | Description                                 | Label   |
+========================+====================================+=============================================+=========+
| code_hash              | `aelf.Hash <#aelf.Hash>`__         | The deployed or updated contract code hash. |         |
+------------------------+------------------------------------+---------------------------------------------+---------+

.. raw:: html

   <div id="acs0.ContractInfo">

.. raw:: html

   </div>

acs0.ContractInfo
^^^^^^^^^^^^^^^^^

+------------------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| Field                  | Type                               | Description                                                                 | Label   |
+========================+====================================+=============================================================================+=========+
| serial\_number         | `int64 <#int64>`__                 | The serial number of the contract.                                          |         |
+------------------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| author                 | `aelf.Address <#aelf.Address>`__   | The author of the contract, this is the person who deployed the contract.   |         |
+------------------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| category               | `sint32 <#sint32>`__               | The category of contract code(0: C#).                                       |         |
+------------------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| code\_hash             | `aelf.Hash <#aelf.Hash>`__         | The hash of the contract code.                                              |         |
+------------------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| is\_system\_contract   | `bool <#bool>`__                   | Whether it is a system contract.                                            |         |
+------------------------+------------------------------------+-----------------------------------------------------------------------------+---------+
| version                | `int32 <#int32>`__                 | The version of the current contract.                                        |         |
+------------------------+------------------------------------+-----------------------------------------------------------------------------+---------+

.. raw:: html

   <div id="acs0.ContractProposed">

.. raw:: html

   </div>

acs0.ContractProposed
^^^^^^^^^^^^^^^^^^^^^

+-----------------------------------+------------------------------+------------------------------------+---------+
| Field                             | Type                         | Description                        | Label   |
+===================================+==============================+====================================+=========+
| proposed\_contract\_input\_hash   | `aelf.Hash <#aelf.Hash>`__   | The id of the proposed contract.   |         |
+-----------------------------------+------------------------------+------------------------------------+---------+

.. raw:: html

   <div id="acs0.ContractUpdateInput">

.. raw:: html

   </div>

acs0.ContractUpdateInput
^^^^^^^^^^^^^^^^^^^^^^^^

+-----------+------------------------------------+--------------------------------------------------+---------+
| Field     | Type                               | Description                                      | Label   |
+===========+====================================+==================================================+=========+
| address   | `aelf.Address <#aelf.Address>`__   | The contract address that needs to be updated.   |         |
+-----------+------------------------------------+--------------------------------------------------+---------+
| code      | `bytes <#bytes>`__                 | The byte array of the new contract code.         |         |
+-----------+------------------------------------+--------------------------------------------------+---------+

.. raw:: html

   <div id="acs0.SetContractAuthorInput">

.. raw:: html

   </div>

acs0.SetContractAuthorInput
'''''''''''''''''''''''''''''

+-----------------------------------+------------------------------------+------------------------------------------------------+---------+
| Field                             | Type                               | Description                                          | Label   |
+===================================+====================================+======================================================+=========+
| contract_address                  | `aelf.Address <#aelf.Address>`__   | The author's contract address needs to be updated.   |         |
+-----------------------------------+------------------------------------+------------------------------------------------------+---------+
| new_author                        | `aelf.Address <#aelf.Address>`__   | The new contract author.                             |         |
+-----------------------------------+------------------------------------+------------------------------------------------------+---------+

.. raw:: html

   <div id="acs0.ReleaseContractInput">

.. raw:: html

   </div>

acs0.ReleaseContractInput
^^^^^^^^^^^^^^^^^^^^^^^^^

+-----------------------------------+------------------------------+------------------------------------+---------+
| Field                             | Type                         | Description                        | Label   |
+===================================+==============================+====================================+=========+
| proposal\_id                      | `aelf.Hash <#aelf.Hash>`__   | The hash of the proposal.          |         |
+-----------------------------------+------------------------------+------------------------------------+---------+
| proposed\_contract\_input\_hash   | `aelf.Hash <#aelf.Hash>`__   | The id of the proposed contract.   |         |
+-----------------------------------+------------------------------+------------------------------------+---------+

.. raw:: html

   <div id="acs0.SystemContractDeploymentInput">

.. raw:: html

   </div>

acs0.SystemContractDeploymentInput
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+---------+
| Field                             | Type                                                                                                                                      | Description                                                                                                             | Label   |
+===================================+===========================================================================================================================================+=========================================================================================================================+=========+
| category                          | `sint32 <#sint32>`__                                                                                                                      | The category of contract code(0: C#).                                                                                   |         |
+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+---------+
| code                              | `bytes <#bytes>`__                                                                                                                        | The byte array of the contract code.                                                                                    |         |
+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+---------+
| name                              | `aelf.Hash <#aelf.Hash>`__                                                                                                                | The name of the contract. It has to be unique.                                                                          |         |
+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+---------+
| transaction\_method\_call\_list   | `SystemContractDeploymentInput.SystemTransactionMethodCallList <#acs0.SystemContractDeploymentInput.SystemTransactionMethodCallList>`__   | An initial list of transactions for the system contract, which is executed in sequence when the contract is deployed.   |         |
+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+---------+

.. raw:: html

   <div
   id="acs0.SystemContractDeploymentInput.SystemTransactionMethodCall">

.. raw:: html

   </div>

acs0.SystemContractDeploymentInput.SystemTransactionMethodCall
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+----------------+------------------------+--------------------------------------------+---------+
| Field          | Type                   | Description                                | Label   |
+================+========================+============================================+=========+
| method\_name   | `string <#string>`__   | The method name of system transaction.     |         |
+----------------+------------------------+--------------------------------------------+---------+
| params         | `bytes <#bytes>`__     | The params of system transaction method.   |         |
+----------------+------------------------+--------------------------------------------+---------+

.. raw:: html

   <div
   id="acs0.SystemContractDeploymentInput.SystemTransactionMethodCallList">

.. raw:: html

   </div>

acs0.SystemContractDeploymentInput.SystemTransactionMethodCallList
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+---------+-----------------------------------------------------------------------------------------------------------------------------------+------------------------------------+------------+
| Field   | Type                                                                                                                              | Description                        | Label      |
+=========+===================================================================================================================================+====================================+============+
| value   | `SystemContractDeploymentInput.SystemTransactionMethodCall <#acs0.SystemContractDeploymentInput.SystemTransactionMethodCall>`__   | The list of system transactions.   | repeated   |
+---------+-----------------------------------------------------------------------------------------------------------------------------------+------------------------------------+------------+

.. raw:: html

   <div id="acs0.ValidateSystemContractAddressInput">

.. raw:: html

   </div>

acs0.ValidateSystemContractAddressInput
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+--------------------------------+------------------------------------+----------------------------------+---------+
| Field                          | Type                               | Description                      | Label   |
+================================+====================================+==================================+=========+
| system\_contract\_hash\_name   | `aelf.Hash <#aelf.Hash>`__         | The name hash of the contract.   |         |
+--------------------------------+------------------------------------+----------------------------------+---------+
| address                        | `aelf.Address <#aelf.Address>`__   | The address of the contract.     |         |
+--------------------------------+------------------------------------+----------------------------------+---------+

.. raw:: html

   <div id="aelf.Address">

.. raw:: html

   </div>

aelf.Address
^^^^^^^^^^^^

+---------+----------------------+---------------+---------+
| Field   | Type                 | Description   | Label   |
+=========+======================+===============+=========+
| value   | `bytes <#bytes>`__   |               |         |
+---------+----------------------+---------------+---------+

.. raw:: html

   <div id="aelf.BinaryMerkleTree">

.. raw:: html

   </div>

aelf.BinaryMerkleTree
^^^^^^^^^^^^^^^^^^^^^

+---------------+-------------------------+---------------------------+------------+
| Field         | Type                    | Description               | Label      |
+===============+=========================+===========================+============+
| nodes         | `Hash <#aelf.Hash>`__   | The leaf nodes.           | repeated   |
+---------------+-------------------------+---------------------------+------------+
| root          | `Hash <#aelf.Hash>`__   | The root node hash.       |            |
+---------------+-------------------------+---------------------------+------------+
| leaf\_count   | `int32 <#int32>`__      | The count of leaf node.   |            |
+---------------+-------------------------+---------------------------+------------+

.. raw:: html

   <div id="aelf.Hash">

.. raw:: html

   </div>

aelf.Hash
^^^^^^^^^

+---------+----------------------+---------------+---------+
| Field   | Type                 | Description   | Label   |
+=========+======================+===============+=========+
| value   | `bytes <#bytes>`__   |               |         |
+---------+----------------------+---------------+---------+

.. raw:: html

   <div id="aelf.LogEvent">

.. raw:: html

   </div>

aelf.LogEvent
^^^^^^^^^^^^^

+----------------+-------------------------------+----------------------------------------------+------------+
| Field          | Type                          | Description                                  | Label      |
+================+===============================+==============================================+============+
| address        | `Address <#aelf.Address>`__   | The contract address.                        |            |
+----------------+-------------------------------+----------------------------------------------+------------+
| name           | `string <#string>`__          | The name of the log event.                   |            |
+----------------+-------------------------------+----------------------------------------------+------------+
| indexed        | `bytes <#bytes>`__            | The indexed data, used to calculate bloom.   | repeated   |
+----------------+-------------------------------+----------------------------------------------+------------+
| non\_indexed   | `bytes <#bytes>`__            | The non indexed data.                        |            |
+----------------+-------------------------------+----------------------------------------------+------------+

.. raw:: html

   <div id="aelf.MerklePath">

.. raw:: html

   </div>

aelf.MerklePath
^^^^^^^^^^^^^^^

+-----------------------+---------------------------------------------+--------------------------+------------+
| Field                 | Type                                        | Description              | Label      |
+=======================+=============================================+==========================+============+
| merkle\_path\_nodes   | `MerklePathNode <#aelf.MerklePathNode>`__   | The merkle path nodes.   | repeated   |
+-----------------------+---------------------------------------------+--------------------------+------------+

.. raw:: html

   <div id="aelf.MerklePathNode">

.. raw:: html

   </div>

aelf.MerklePathNode
^^^^^^^^^^^^^^^^^^^

+-------------------------+-------------------------+------------------------------------+---------+
| Field                   | Type                    | Description                        | Label   |
+=========================+=========================+====================================+=========+
| hash                    | `Hash <#aelf.Hash>`__   | The node hash.                     |         |
+-------------------------+-------------------------+------------------------------------+---------+
| is\_left\_child\_node   | `bool <#bool>`__        | Whether it is a left child node.   |         |
+-------------------------+-------------------------+------------------------------------+---------+

.. raw:: html

   <div id="aelf.SInt32Value">

.. raw:: html

   </div>

aelf.SInt32Value
^^^^^^^^^^^^^^^^

+---------+------------------------+---------------+---------+
| Field   | Type                   | Description   | Label   |
+=========+========================+===============+=========+
| value   | `sint32 <#sint32>`__   |               |         |
+---------+------------------------+---------------+---------+

.. raw:: html

   <div id="aelf.SInt64Value">

.. raw:: html

   </div>

aelf.SInt64Value
^^^^^^^^^^^^^^^^

+---------+------------------------+---------------+---------+
| Field   | Type                   | Description   | Label   |
+=========+========================+===============+=========+
| value   | `sint64 <#sint64>`__   |               |         |
+---------+------------------------+---------------+---------+

.. raw:: html

   <div id="aelf.ScopedStatePath">

.. raw:: html

   </div>

aelf.ScopedStatePath
^^^^^^^^^^^^^^^^^^^^

+-----------+-----------------------------------+----------------------------------------------------------+---------+
| Field     | Type                              | Description                                              | Label   |
+===========+===================================+==========================================================+=========+
| address   | `Address <#aelf.Address>`__       | The scope address, which will be the contract address.   |         |
+-----------+-----------------------------------+----------------------------------------------------------+---------+
| path      | `StatePath <#aelf.StatePath>`__   | The path of contract state.                              |         |
+-----------+-----------------------------------+----------------------------------------------------------+---------+

.. raw:: html

   <div id="aelf.SmartContractRegistration">

.. raw:: html

   </div>

aelf.SmartContractRegistration
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+------------------------+-------------------------+-----------------------------------------+---------+
| Field                  | Type                    | Description                             | Label   |
+========================+=========================+=========================================+=========+
| category               | `sint32 <#sint32>`__    | The category of contract code(0: C#).   |         |
+------------------------+-------------------------+-----------------------------------------+---------+
| code                   | `bytes <#bytes>`__      | The byte array of the contract code.    |         |
+------------------------+-------------------------+-----------------------------------------+---------+
| code\_hash             | `Hash <#aelf.Hash>`__   | The hash of the contract code.          |         |
+------------------------+-------------------------+-----------------------------------------+---------+
| is\_system\_contract   | `bool <#bool>`__        | Whether it is a system contract.        |         |
+------------------------+-------------------------+-----------------------------------------+---------+
| version                | `int32 <#int32>`__      | The version of the current contract.    |         |
+------------------------+-------------------------+-----------------------------------------+---------+

.. raw:: html

   <div id="aelf.StatePath">

.. raw:: html

   </div>

aelf.StatePath
^^^^^^^^^^^^^^

+---------+------------------------+---------------------------------------+------------+
| Field   | Type                   | Description                           | Label      |
+=========+========================+=======================================+============+
| parts   | `string <#string>`__   | The partial path of the state path.   | repeated   |
+---------+------------------------+---------------------------------------+------------+

.. raw:: html

   <div id="aelf.Transaction">

.. raw:: html

   </div>

aelf.Transaction
^^^^^^^^^^^^^^^^

+----------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| Field                | Type                          | Description                                                                                                                                                                                        | Label   |
+======================+===============================+====================================================================================================================================================================================================+=========+
| from                 | `Address <#aelf.Address>`__   | The address of the sender of the transaction.                                                                                                                                                      |         |
+----------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| to                   | `Address <#aelf.Address>`__   | The address of the contract when calling a contract.                                                                                                                                               |         |
+----------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| ref\_block\_number   | `int64 <#int64>`__            | The height of the referenced block hash.                                                                                                                                                           |         |
+----------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| ref\_block\_prefix   | `bytes <#bytes>`__            | The first four bytes of the referenced block hash.                                                                                                                                                 |         |
+----------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| method\_name         | `string <#string>`__          | The name of a method in the smart contract at the To address.                                                                                                                                      |         |
+----------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| params               | `bytes <#bytes>`__            | The parameters to pass to the smart contract method.                                                                                                                                               |         |
+----------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| signature            | `bytes <#bytes>`__            | When signing a transaction its actually a subset of the fields: from/to and the target method as well as the parameter that were given. It also contains the reference block number and prefix.  |         |
+----------------------+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+

.. raw:: html

   <div id="aelf.TransactionExecutingStateSet">

.. raw:: html

   </div>

aelf.TransactionExecutingStateSet
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+-----------+---------------------------------------------------------------------------------------------------+-----------------------+------------+
| Field     | Type                                                                                              | Description           | Label      |
+===========+===================================================================================================+=======================+============+
| writes    | `TransactionExecutingStateSet.WritesEntry <#aelf.TransactionExecutingStateSet.WritesEntry>`__     | The changed states.   | repeated   |
+-----------+---------------------------------------------------------------------------------------------------+-----------------------+------------+
| reads     | `TransactionExecutingStateSet.ReadsEntry <#aelf.TransactionExecutingStateSet.ReadsEntry>`__       | The read states.      | repeated   |
+-----------+---------------------------------------------------------------------------------------------------+-----------------------+------------+
| deletes   | `TransactionExecutingStateSet.DeletesEntry <#aelf.TransactionExecutingStateSet.DeletesEntry>`__   | The deleted states.   | repeated   |
+-----------+---------------------------------------------------------------------------------------------------+-----------------------+------------+

.. raw:: html

   <div id="aelf.TransactionExecutingStateSet.DeletesEntry">

.. raw:: html

   </div>

aelf.TransactionExecutingStateSet.DeletesEntry
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+---------+------------------------+---------------+---------+
| Field   | Type                   | Description   | Label   |
+=========+========================+===============+=========+
| key     | `string <#string>`__   |               |         |
+---------+------------------------+---------------+---------+
| value   | `bool <#bool>`__       |               |         |
+---------+------------------------+---------------+---------+

.. raw:: html

   <div id="aelf.TransactionExecutingStateSet.ReadsEntry">

.. raw:: html

   </div>

aelf.TransactionExecutingStateSet.ReadsEntry
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+---------+------------------------+---------------+---------+
| Field   | Type                   | Description   | Label   |
+=========+========================+===============+=========+
| key     | `string <#string>`__   |               |         |
+---------+------------------------+---------------+---------+
| value   | `bool <#bool>`__       |               |         |
+---------+------------------------+---------------+---------+

.. raw:: html

   <div id="aelf.TransactionExecutingStateSet.WritesEntry">

.. raw:: html

   </div>

aelf.TransactionExecutingStateSet.WritesEntry
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+---------+------------------------+---------------+---------+
| Field   | Type                   | Description   | Label   |
+=========+========================+===============+=========+
| key     | `string <#string>`__   |               |         |
+---------+------------------------+---------------+---------+
| value   | `bytes <#bytes>`__     |               |         |
+---------+------------------------+---------------+---------+

.. raw:: html

   <div id="aelf.TransactionResult">

.. raw:: html

   </div>

aelf.TransactionResult
^^^^^^^^^^^^^^^^^^^^^^

+-------------------+---------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+
| Field             | Type                                                          | Description                                                                                                                                                                                                                                                                | Label      |
+===================+===============================================================+============================================================================================================================================================================================================================================================================+============+
| transaction\_id   | `Hash <#aelf.Hash>`__                                         | The transaction id.                                                                                                                                                                                                                                                        |            |
+-------------------+---------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+
| status            | `TransactionResultStatus <#aelf.TransactionResultStatus>`__   | The transaction result status.                                                                                                                                                                                                                                             |            |
+-------------------+---------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+
| logs              | `LogEvent <#aelf.LogEvent>`__                                 | The log events.                                                                                                                                                                                                                                                            | repeated   |
+-------------------+---------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+
| bloom             | `bytes <#bytes>`__                                            | Bloom filter for transaction logs. A transaction log event can be defined in the contract and stored in the bloom filter after the transaction is executed. Through this filter, we can quickly search for and determine whether a log exists in the transaction result.   |            |
+-------------------+---------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+
| return\_value     | `bytes <#bytes>`__                                            | The return value of the transaction execution.                                                                                                                                                                                                                             |            |
+-------------------+---------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+
| block\_number     | `int64 <#int64>`__                                            | The height of the block hat packages the transaction.                                                                                                                                                                                                                      |            |
+-------------------+---------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+
| block\_hash       | `Hash <#aelf.Hash>`__                                         | The hash of the block hat packages the transaction.                                                                                                                                                                                                                        |            |
+-------------------+---------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+
| error             | `string <#string>`__                                          | Failed execution error message.                                                                                                                                                                                                                                            |            |
+-------------------+---------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------+

.. raw:: html

   <div id="aelf.TransactionResultStatus">

.. raw:: html

   </div>

aelf.TransactionResultStatus
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+----------------------------+----------+-------------------------------------------------------------------------------------+
| Name                       | Number   | Description                                                                         |
+============================+==========+=====================================================================================+
| NOT\_EXISTED               | 0        | The execution result of the transaction does not exist.                             |
+----------------------------+----------+-------------------------------------------------------------------------------------+
| PENDING                    | 1        | The transaction is in the transaction pool waiting to be packaged.                  |
+----------------------------+----------+-------------------------------------------------------------------------------------+
| FAILED                     | 2        | Transaction execution failed.                                                       |
+----------------------------+----------+-------------------------------------------------------------------------------------+
| MINED                      | 3        | The transaction was successfully executed and successfully packaged into a block.   |
+----------------------------+----------+-------------------------------------------------------------------------------------+
| CONFLICT                   | 4        | When executed in parallel, there are conflicts with other transactions.             |
+----------------------------+----------+-------------------------------------------------------------------------------------+
| PENDING\_VALIDATION        | 5        | The transaction is waiting for validation.                                          |
+----------------------------+----------+-------------------------------------------------------------------------------------+
| NODE\_VALIDATION\_FAILED   | 6        | Transaction validation failed.                                                      |
+----------------------------+----------+-------------------------------------------------------------------------------------+

Example
-------

ACS0 declares methods for the scenes about contract deployment and update. AElf provides the implementation for ACS0, ``Genesis Contract``.
You can refer to the implementation of the :doc:`Genesis contract api<../smart-contract-api/genesis>`.